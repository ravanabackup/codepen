(function() {
  var bars, canvas, canvasHeight, canvasWidth, colorWaves, ctx, deg_to_rad, paint, side, steps, time, π, φ;

  canvas = document.getElementById('canvas');

  ctx = canvas.getContext('2d');

  canvasHeight = canvas.height;

  canvasWidth = canvas.width;

  time = 0;

  steps = 60;

  side = canvasWidth / steps;

  bars = Math.ceil(canvasHeight / side);

  π = Math.PI;

  deg_to_rad = function(deg) {
    return deg * 2 * π / 360;
  };

  colorWaves = function(t, T1, T2, T3, φ1, φ2, φ3, y_0 = 128, a = 127) {
    var b, bar, g, i, r, ref, results, ø_0, ø_x, ø_y, ω1, ω2, ω3;
    ω1 = 2 * π / T1;
    ω2 = 2 * π / T2;
    ω3 = 2 * π / T3;
    results = [];
    for (bar = i = 0, ref = bars; (0 <= ref ? i <= ref : i >= ref); bar = 0 <= ref ? ++i : --i) {
      ø_y = (-1) ^ bar * bar * 2 * π / steps;
      results.push((function() {
        var j, ref1, results1;
        results1 = [];
        for (ø_0 = j = 0, ref1 = steps; (0 <= ref1 ? j <= ref1 : j >= ref1); ø_0 = 0 <= ref1 ? ++j : --j) {
          ø_x = ø_0 * 2 * π / steps;
          r = Math.floor(Math.sin(ω1 * t + φ1 - ø_x + ø_y) * a + y_0);
          g = Math.floor(Math.sin(ω2 * t + φ2 - ø_x + ø_y) * a + y_0);
          b = Math.floor(Math.sin(ω3 * t + φ3 - ø_x + ø_y) * a + y_0);
          ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
          results1.push(ctx.fillRect(ø_0 * side, bar * side, side, side));
        }
        return results1;
      })());
    }
    return results;
  };

  φ = deg_to_rad(120);

  paint = function() {
    colorWaves(time, steps, steps, steps, φ, 0, -φ);
    time++;
    return requestAnimationFrame(paint);
  };

  requestAnimationFrame(paint, 30);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsWUFBQSxFQUFBLFdBQUEsRUFBQSxVQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBOztFQUFBLE1BQUEsR0FBUyxRQUFRLENBQUMsY0FBVCxDQUF3QixRQUF4Qjs7RUFDVCxHQUFBLEdBQU0sTUFBTSxDQUFDLFVBQVAsQ0FBa0IsSUFBbEI7O0VBQ04sWUFBQSxHQUFlLE1BQU0sQ0FBQzs7RUFDdEIsV0FBQSxHQUFjLE1BQU0sQ0FBQzs7RUFFckIsSUFBQSxHQUFPOztFQUNQLEtBQUEsR0FBUTs7RUFDUixJQUFBLEdBQU8sV0FBQSxHQUFjOztFQUNyQixJQUFBLEdBQU8sSUFBSSxDQUFDLElBQUwsQ0FBVSxZQUFBLEdBQWUsSUFBekI7O0VBR1AsQ0FBQSxHQUFJLElBQUksQ0FBQzs7RUFFVCxVQUFBLEdBQWEsUUFBQSxDQUFDLEdBQUQsQ0FBQTtXQUNYLEdBQUEsR0FBTSxDQUFOLEdBQVUsQ0FBVixHQUFjO0VBREg7O0VBR2IsVUFBQSxHQUFhLFFBQUEsQ0FBQyxDQUFELEVBQUksRUFBSixFQUFRLEVBQVIsRUFBWSxFQUFaLEVBQWdCLEVBQWhCLEVBQW9CLEVBQXBCLEVBQXdCLEVBQXhCLEVBQTRCLE1BQU0sR0FBbEMsRUFBdUMsSUFBSSxHQUEzQyxDQUFBO0FBQ2IsUUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtJQUFFLEVBQUEsR0FBSyxDQUFBLEdBQUksQ0FBSixHQUFRO0lBQ2IsRUFBQSxHQUFLLENBQUEsR0FBSSxDQUFKLEdBQVE7SUFDYixFQUFBLEdBQUssQ0FBQSxHQUFJLENBQUosR0FBUTtBQUNiO0lBQUEsS0FBVyxxRkFBWDtNQUNFLEdBQUEsR0FBTSxDQUFDLENBQUMsQ0FBRixDQUFBLEdBQU8sR0FBQSxHQUFNLEdBQU4sR0FBWSxDQUFaLEdBQWdCLENBQWhCLEdBQW9COzs7QUFDakM7UUFBQSxLQUFXLDJGQUFYO1VBQ0UsR0FBQSxHQUFNLEdBQUEsR0FBTSxDQUFOLEdBQVUsQ0FBVixHQUFjO1VBQ3BCLENBQUEsR0FBSSxJQUFJLENBQUMsS0FBTCxDQUFXLElBQUksQ0FBQyxHQUFMLENBQVMsRUFBQSxHQUFLLENBQUwsR0FBUyxFQUFULEdBQWMsR0FBZCxHQUFvQixHQUE3QixDQUFBLEdBQW9DLENBQXBDLEdBQXdDLEdBQW5EO1VBQ0osQ0FBQSxHQUFJLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLEdBQUwsQ0FBUyxFQUFBLEdBQUssQ0FBTCxHQUFTLEVBQVQsR0FBYyxHQUFkLEdBQW9CLEdBQTdCLENBQUEsR0FBb0MsQ0FBcEMsR0FBd0MsR0FBbkQ7VUFDSixDQUFBLEdBQUksSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsR0FBTCxDQUFTLEVBQUEsR0FBSyxDQUFMLEdBQVMsRUFBVCxHQUFjLEdBQWQsR0FBb0IsR0FBN0IsQ0FBQSxHQUFvQyxDQUFwQyxHQUF3QyxHQUFuRDtVQUVKLEdBQUcsQ0FBQyxTQUFKLEdBQWdCLENBQUEsSUFBQSxDQUFBLENBQU8sQ0FBUCxDQUFBLEVBQUEsQ0FBQSxDQUFhLENBQWIsQ0FBQSxFQUFBLENBQUEsQ0FBbUIsQ0FBbkIsQ0FBQSxDQUFBO3dCQUNoQixHQUFHLENBQUMsUUFBSixDQUFhLEdBQUEsR0FBTSxJQUFuQixFQUF5QixHQUFBLEdBQU0sSUFBL0IsRUFBcUMsSUFBckMsRUFBMkMsSUFBM0M7UUFQRixDQUFBOzs7SUFGRixDQUFBOztFQUpXOztFQWViLENBQUEsR0FBSSxVQUFBLENBQVcsR0FBWDs7RUFDSixLQUFBLEdBQVEsUUFBQSxDQUFBLENBQUE7SUFDTixVQUFBLENBQVcsSUFBWCxFQUFpQixLQUFqQixFQUF3QixLQUF4QixFQUErQixLQUEvQixFQUFzQyxDQUF0QyxFQUF5QyxDQUF6QyxFQUE0QyxDQUFDLENBQTdDO0lBQ0EsSUFBQTtXQUNBLHFCQUFBLENBQXNCLEtBQXRCO0VBSE07O0VBS1IscUJBQUEsQ0FBc0IsS0FBdEIsRUFBNkIsRUFBN0I7QUFyQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnY2FudmFzJ1xuY3R4ID0gY2FudmFzLmdldENvbnRleHQgJzJkJ1xuY2FudmFzSGVpZ2h0ID0gY2FudmFzLmhlaWdodFxuY2FudmFzV2lkdGggPSBjYW52YXMud2lkdGhcblxudGltZSA9IDBcbnN0ZXBzID0gNjBcbnNpZGUgPSBjYW52YXNXaWR0aCAvIHN0ZXBzXG5iYXJzID0gTWF0aC5jZWlsIGNhbnZhc0hlaWdodCAvIHNpZGVcblxuXG7PgCA9IE1hdGguUElcblxuZGVnX3RvX3JhZCA9IChkZWcpIC0+XG4gIGRlZyAqIDIgKiDPgCAvIDM2MFxuXG5jb2xvcldhdmVzID0gKHQsIFQxLCBUMiwgVDMsIM+GMSwgz4YyLCDPhjMsIHlfMCA9IDEyOCwgYSA9IDEyNykgLT5cbiAgz4kxID0gMiAqIM+AIC8gVDFcbiAgz4kyID0gMiAqIM+AIC8gVDJcbiAgz4kzID0gMiAqIM+AIC8gVDNcbiAgZm9yIGJhciBpbiBbMC4uYmFyc11cbiAgICDDuF95ID0gKC0xKSBeIGJhciAqIGJhciAqIDIgKiDPgCAvIHN0ZXBzXG4gICAgZm9yIMO4XzAgaW4gWzAuLnN0ZXBzXVxuICAgICAgw7hfeCA9IMO4XzAgKiAyICogz4AgLyBzdGVwc1xuICAgICAgciA9IE1hdGguZmxvb3IgTWF0aC5zaW4oz4kxICogdCArIM+GMSAtIMO4X3ggKyDDuF95KSAqIGEgKyB5XzBcbiAgICAgIGcgPSBNYXRoLmZsb29yIE1hdGguc2luKM+JMiAqIHQgKyDPhjIgLSDDuF94ICsgw7hfeSkgKiBhICsgeV8wXG4gICAgICBiID0gTWF0aC5mbG9vciBNYXRoLnNpbijPiTMgKiB0ICsgz4YzIC0gw7hfeCArIMO4X3kpICogYSArIHlfMFxuXG4gICAgICBjdHguZmlsbFN0eWxlID0gXCJyZ2IoI3tyfSwgI3tnfSwgI3tifSlcIlxuICAgICAgY3R4LmZpbGxSZWN0IMO4XzAgKiBzaWRlLCBiYXIgKiBzaWRlLCBzaWRlLCBzaWRlXG5cbs+GID0gZGVnX3RvX3JhZCAxMjBcbnBhaW50ID0gKCkgLT5cbiAgY29sb3JXYXZlcyB0aW1lLCBzdGVwcywgc3RlcHMsIHN0ZXBzLCDPhiwgMCwgLc+GXG4gIHRpbWUrK1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcGFpbnRcblxucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBhaW50LCAzMFxuIl19
//# sourceURL=coffeescript